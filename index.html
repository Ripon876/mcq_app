<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="./css/style.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
    <body>


<div class="user_information wrapper pt-5 ">
    <form>
    <div class="form-group mt-4">
        <label>Your Name</label>
        <input type="text" class="form-control" required id="user_name"  placeholder="name">
    </div>
    <div class="form-group">
        <label for="exampleFormControlInput2"> Your Email address</label>
        <input type="email" class="form-control"  required="required" id="exampleFormControlInput2" placeholder="name@example.com">
    </div>

    <button class="btn btn-primary" type="submit" id="take_information">Enter</button>
    </form>
</div>


<div class="container show_result">
    <div style="max-width: 600px;margin: 80px auto 50px;padding: 30px;border-radius: 20px;background: #c0e2df;position: relative;min-height: 240px;overflow: hidden;;">
        <div class="mt-5">
            
        
        <h2  id="show_user_name" class="text-center"></h2>
        <h3  class="text-center">You got <span id="result_publish"></span> out of 15</h3>
        <div class="container text-center">
          <a href="/" class="btn btn-primary mt-2">Click Here To retake the test</a>          
        </div>

    </div>
    </div>
</div>

        <div class="wrapper questions">
            <form  id="myForm" >

            <div class="wrap mt-5 qs1" id="q2" onchange="disable(this)">
                <div class="h4 font-weight-bold"> 1. IPV4 stand's for?</div>
                <div class="pt-4">
                   
                        <label class="options">Internet Protocol 1
                            <input type="radio" class="radioBtnClass" name="qs1"  value="0">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">Intranet Protocol  2
                            <input type="radio" class="radioBtnClass"  name="qs1" value="0">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">internet Protocol  4
                            <input type="radio" class="radioBtnClass"  name="qs1" value="1">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">None of the above
                            <input type="radio"  class="radioBtnClass"  name="qs1" value="0">
                            <span class="checkmark"></span>
                        </label> 

                </div>
            </div>    
                        <div class="wrap mt-5 qs2" id="q2" onchange="disable(this)" >
                <div class="h4 font-weight-bold"> 2. IPV4 stand's for?</div>
                <div class="pt-4">
                   
                        <label class="options">Internet Protocol 1
                            <input type="radio" class="radioBtnClass" name="qs2"  value="0">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">Intranet Protocol  2
                            <input type="radio" class="radioBtnClass"  name="qs2" value="0">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">internet Protocol  4
                            <input type="radio" class="radioBtnClass"  name="qs2" value="1">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">None of the above
                            <input type="radio"  class="radioBtnClass"  name="qs2" value="0">
                            <span class="checkmark"></span>
                        </label> 

                </div>
            </div>        
    
                        <div class="wrap mt-5 qs3" id="q2" onchange="disable(this)" >
                <div class="h4 font-weight-bold"> 3. IPV4 stand's for?</div>
                <div class="pt-4">
                   
                        <label class="options">Internet Protocol 1
                            <input type="radio" class="radioBtnClass" name="qs3"  value="0">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">Intranet Protocol  2
                            <input type="radio" class="radioBtnClass"  name="qs3" value="0">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">internet Protocol  4
                            <input type="radio" class="radioBtnClass"  name="qs3" value="1">
                            <span class="checkmark"></span>
                        </label>
                        <label class="options">None of the above
                            <input type="radio"  class="radioBtnClass"  name="qs3" value="0">
                            <span class="checkmark"></span>
                        </label> 

                </div>
            </div>        
            <input type="text" id="result_container"  name="result" style="display: none;">
            <input type="submit" value="Submit" class="btn btn-primary mt-3">
           </form>
        </div>
   

<script>   
     let examine = "";
    $(".questions").hide();
    $(".show_result").hide();

$(".user_information form").on("submit",function(e){
    e.preventDefault();
})


   $("#take_information").click(function(){

 examine = document.getElementById("user_name").value.replace(/\s+/g, '_');


      $(".questions").show(700);
      $(".user_information").hide(600);
});
</script>
<script>
    var result = 0;


    function disable(d){

    var ds = d.classList[2];
    var rb = "." + ds + " input:checked";
    var value = $(rb).val();
    var cla = "." + ds + " input";
    console.log(cla);  // this is for debuging
    
    $(cla).attr('disabled', true);

    if(value == 0){
    }
    if(value == 1){
        result+=1;   
    }

     }



</script>
<script>
    
 

    $('#myForm').submit(function(e){

   e.preventDefault();
document.getElementById("result_container").value = result;


var postUrl = '/result/' + examine + '/' + result;
console.log(postUrl)
  
    const xhr = new XMLHttpRequest();
    xhr.open('POST',postUrl, true);
    xhr.getResponseHeader('Content-type', 'application/json');

    xhr.onload = function () {
        if(this.status === 200){

            console.log("done")
        }
        else{
            console.log("Some error occured")
        }
    }
    xhr.send();

});



</script>
<script>
   

    $('#myForm').submit(function(e){
$("#myForm input[type=radio]:checked").each(function() {
  if(this.value == 0 && this.checked == true)
  {

     var v = $(this).parents()[0].children[1].style.background = 'red';
     var k = $(this).parents()[0].children[1].style.border = 'red';
     var c = $(this).parents()[0].style.color = "red";
     console.log(c)
  }

 if(this.value == 1 && this.checked == true)
  {

     var v = $(this).parents()[0].children[1].style.background = 'green';
     var k = $(this).parents()[0].children[1].style.border = 'green';
     var c = $(this).parents()[0].style.color = "green";
     console.log(v)
  }

});

});


   $('#myForm').submit(function(e){

        $(".show_result #show_user_name").text(document.getElementById("user_name").value);
        $(".show_result #result_publish").text(result);
          $(".show_result").show(400);
          function scrollToTop() {
            $("html, body").animate({ scrollTop: "0" });
        }
        scrollToTop()
});
</script>
    </body>
</html>